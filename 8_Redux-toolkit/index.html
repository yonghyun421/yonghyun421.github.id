<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="naver-site-verification" content="8307d14d3543c52b30c035742cb93e7a9daa0342"/><meta data-react-helmet="true" name="google-site-verification" content="3aiAHnmZh7b9INfqnb-hTuQQJysDnKm5e4ZZZ_2uLgc"/><meta data-react-helmet="true" name="twitter:creator" content="@username"/><meta data-react-helmet="true" name="twitter:site" content="@username"/><meta data-react-helmet="true" name="twitter:image" content="/static/473d0ad4cd50316b9bea13fc92c1e6b8/test.jpeg"/><meta data-react-helmet="true" name="twitter:description" content="Redux-toolkit을 사용해서 Redux를 좀 더 쉽게...?"/><meta data-react-helmet="true" name="twitter:title" content="Redux-toolkit"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:site_name" content="Redux-toolkit"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:image" content="/static/473d0ad4cd50316b9bea13fc92c1e6b8/test.jpeg"/><meta data-react-helmet="true" property="og:description" content="Redux-toolkit을 사용해서 Redux를 좀 더 쉽게...?"/><meta data-react-helmet="true" property="og:title" content="Redux-toolkit"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" name="description" content="Redux-toolkit을 사용해서 Redux를 좀 더 쉽게...?"/><meta name="generator" content="Gatsby 4.6.0"/><style data-href="/styles.0109ae7f897db2fecdd6.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><link rel="canonical" href="https://yonghyun421.github.io/8_Redux-toolkit/" data-baseprotocol="https:" data-basehost="yonghyun421.github.io"/><title data-react-helmet="true">Redux-toolkit</title><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/webpack-runtime-66440a84066d2852c863.js"/><link as="script" rel="preload" href="/framework-a41a30b6052f08f79325.js"/><link as="script" rel="preload" href="/app-926ca64946cd67eef8a8.js"/><link as="script" rel="preload" href="/cb1608f2-3d1f96b69f7c4498694b.js"/><link as="script" rel="preload" href="/d0dcf9c1039535d44ee74defc829dfbf62dac3c5-100700d0ee8b52b923af.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-tsx-42f3bc44c57e8846f30b.js"/><link as="fetch" rel="preload" href="/page-data/8_Redux-toolkit/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z e1strnqo0"><style data-emotion="css-global 1fjbsoa">@import url('<https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap>');*{padding:0;margin:0;box-sizing:border-box;font-family:'Nanum Myeongjo',serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:3024px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;3024&#x27; width=&#x27;3024&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#484848;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/473d0ad4cd50316b9bea13fc92c1e6b8/0531b/test.webp 756w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/dd848/test.webp 1512w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/95aac/test.webp 3024w" sizes="(min-width: 3024px) 3024px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 3024px) 3024px, 100vw" decoding="async" loading="lazy" data-src="/static/473d0ad4cd50316b9bea13fc92c1e6b8/3fd2e/test.jpg" data-srcset="/static/473d0ad4cd50316b9bea13fc92c1e6b8/4a00f/test.jpg 756w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/facf2/test.jpg 1512w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/3fd2e/test.jpg 3024w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/473d0ad4cd50316b9bea13fc92c1e6b8/0531b/test.webp 756w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/dd848/test.webp 1512w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/95aac/test.webp 3024w" sizes="(min-width: 3024px) 3024px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 3024px) 3024px, 100vw" decoding="async" loading="lazy" src="/static/473d0ad4cd50316b9bea13fc92c1e6b8/3fd2e/test.jpg" srcSet="/static/473d0ad4cd50316b9bea13fc92c1e6b8/4a00f/test.jpg 756w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/facf2/test.jpg 1512w,/static/473d0ad4cd50316b9bea13fc92c1e6b8/3fd2e/test.jpg 3024w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><style data-emotion="css m1156n">.css-m1156n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-m1156n{width:100%;padding:40px 20px;}}</style><div class="css-m1156n e1st1jau3"><style data-emotion="css gywgo7">.css-gywgo7{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;background:#ffffff;color:#000000;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);}@media (max-width: 768px){.css-gywgo7{width:30px;height:30px;font-size:18px;}}</style><div class="css-gywgo7 e1st1jau2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path></svg></div><style data-emotion="css gn4qtp">.css-gn4qtp{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:45px;font-weight:800;}@media (max-width: 768px){.css-gn4qtp{font-size:30px;}}</style><div class="css-gn4qtp e1st1jau1">Redux-toolkit</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau0"><div>React / TIL / Redux</div><div>2022.01.03.</div></div></div></div><style data-emotion="css uo146q">.css-uo146q{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0;word-break:break-all;line-height:1.8;font-size:16px;font-weight:400;}.css-uo146q p{padding:3px 0;}.css-uo146q h1,.css-uo146q h2,.css-uo146q h3{font-weight:800;margin-bottom:30px;}.css-uo146q *+h1,.css-uo146q *+h2,.css-uo146q *+h3{margin-top:80px;}.css-uo146q hr+h1,.css-uo146q hr+h2,.css-uo146q hr+h3{margin-top:0;}.css-uo146q h1{font-size:30px;}.css-uo146q h2{font-size:25px;}.css-uo146q h3{font-size:20px;}.css-uo146q blockquote{margin:30px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}.css-uo146q ol,.css-uo146q ul{margin-left:20px;padding:30px 0;}.css-uo146q hr{border:1px solid #000000;margin:100px 0;}.css-uo146q a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-uo146q pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}.css-uo146q pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-uo146q code[class*='language-'],.css-uo146q pre[class*='language-']{tab-size:2;}@media (max-width: 768px){.css-uo146q{width:100%;padding:80px 20px;line-height:1.6;font-size:14px;}.css-uo146q h1{font-size:23px;}.css-uo146q h2{font-size:20px;}.css-uo146q h3{font-size:17px;}.css-uo146q img{width:100%;}.css-uo146q hr{margin:50px 0;}}</style><div class="css-uo146q e1ijh0y10"><h1>Redux의 문제점들</h1>
<p>리덕스는 리액트의 상태 관리 라이브러리 중 대표로서 굳게 자리매김하고 있었지만, 사용하기 너무 복잡하고 배우기 어렵다는 의견이 많았다. (나또한 그렇게 느껴서 여러번 좌절할뻔했다…)
리덕스가 높은 러닝 커브와 복잡성을 가지는 원인들을 리덕스 측에서 문서로 공식적으로 발표한 것을 보면서 어떤 것들이 있는지 확인해보자.</p>
<h3>1. store configuration 복잡성</h3>
<p>우선, 리덕스는 스토어(store)를 설정하는게 너무 복잡하다. 리덕스는 앱 전체에 단 하나의 스토어를 가지며 이 스토어는 리액트 앱에서 사용할 상태(state)들을 저장하고 관리한다. 따라서 스토어는 상태 값들을 사용하고 관리하는 모든 API를 가지며 이것을 설정해주는 것은 복잡한 작업이었다.</p>
<h3>2. redux를 사용하기 위해선 다른 라이브러리들의 추가설치가 너무 많이 필요했다.</h3>
<p>redux를 제대로 사용하려면 다음과 같은 패키지들을 추가 설치해줘야 한다.</p>
<ul>
<li>react-redux : react와 바인딩</li>
<li>immutable/immer : 불변성 유지</li>
<li>redux-thunk/redux-saga/redux-pender : 비동기 통신</li>
<li>redux-actions : 액션 생성
심지어 리액트와 리덕스 특유의 높은 자유도로 인해 프로젝트마다, 혹은 개발자 취향마다 설치하는 패키지들이 다 제각각일 수 있다.</li>
</ul>
<p>따라서 매번 프로젝트마다 다른 패키지를 학습해야 하는 상황이 발생하게 될 수 있는 것이다.</p>
<h3>3. 너무 많은 양의 보일러플레이트를 파일마다 반복 작성해야 했다.</h3>
<p>리덕스 액션과 리듀서들을 도메인마다 분리를 하고, 또 리액트 각 컴포넌트마다 바인딩을 하면, 엄청나게 많은 수의 파일에서 리덕스 코드를 사용하게 된다. 그런데 그 많은 파일에서 많은 양의 보일러 플레이트 코드를 반복해서 사용해줘야 해서 코드가 지저분해지고 관리포인트가 많다는 단점이 있다.</p>
<p>또한 추가적으로 설치하는 패키지에 따라 보일러플레이트 코드가 천차만별이어서 정형화된 보일러 플레이트를 바로 작성하기도 어렵다.</p>
<h2>Redux Toolkit을 통한 문제점 해결</h2>
<p>리덕스 툴킷(Redux Toolkit)은 리덕스에서 공식적으로 내놓은 위에서 언급한 단점들을 제거한 패키지이다.
리덕스 공식 문서도 리덕스를 사용할때 이 리덕스 툴킷을 사용하는 것이 좋다고 적극 권장하고 있다.</p>
<h3>1. store configuration</h3>
<p>먼저 스토어 생성은 configureStore 함수를 실행하여 할 수 있다. 이 안에서 리듀서(reducer)들을 바인딩 해주면 된다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> configureStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@reduxjs/toolkit'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">reducer</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>그리고 리액트 앱에서는 이 store를 import해서 Provider로 제공해준다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<h3>2. 너무 많은 패키지들 추가 설치</h3>
<p>리덕스 툴킷은 딴 두 가지 패키지만 설치해서 사용할 수 있다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> @reduxjs/toolkit react-redux</code></pre></div>
<p>리덕스 툴킷은 내부적으로 불변성을 지키기 위해 immer 라이브러리를 사용하고 비동기 통신을 위해 redux-thunk를 사용한다. 리덕스 툴킷은 이렇게 내부적으로 의존 라이브러리들을 사용해서 개발자는 툴킷만 설치하면 다른 패키지를 뭘 설치할지 고민하지 않아도 된다. 그러므로 리덕스 툴킷 사용시 추가 라이브러리를 설치하지 않고 공식문서의 가이드대로 두 가지만 설치를 해서 사용하는 것이 패키지 사용 통일성을 지킬 수 있어 좋다.</p>
<h3>3. 너무 많은 양의 보일러 플레이트</h3>
<p>리덕스 툴킷을 보면 보일러 플레이트 코드량을 최소화하도록 노력한 것을 알 수 있다. flux 패턴 중에 액션 생성 함수, 리듀서 코드는 다음과 같이 작성할 수 있다.</p>
<ul>
<li><strong>type.d.ts</strong></li>
</ul>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">ToDo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  content<span class="token operator">:</span> <span class="token builtin">string</span>
  checked<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ToDoList</span> <span class="token operator">=</span> ToDo<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">interface</span> <span class="token class-name">IToDoListState</span> <span class="token punctuation">{</span>
  toDoList<span class="token operator">:</span> IToDoList
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IAction</span> <span class="token punctuation">{</span>
  type<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IToggleToDoPayload</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  checked<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IToggleToDoAction</span> <span class="token keyword">extends</span> <span class="token class-name">IAction</span> <span class="token punctuation">{</span>
  payload<span class="token operator">:</span> IToggleToDoPayload
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IDeleteToDoPayload</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IDeleteToDoAction</span> <span class="token keyword">extends</span> <span class="token class-name">IAction</span> <span class="token punctuation">{</span>
  payload<span class="token operator">:</span> IDeleteToDoPayload
<span class="token punctuation">}</span></code></pre></div>
<ul>
<li><strong>src/store/toDoList/index.ts</strong></li>
</ul>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> createAction<span class="token punctuation">,</span> createReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@reduxjs/toolkit'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
  toggleToDo<span class="token operator">:</span> <span class="token generic-function"><span class="token function">createAction</span><span class="token generic class-name"><span class="token operator">&lt;</span>IToggleToDoPayload<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'TOGGLE/TO_DO'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  deleteToDo<span class="token operator">:</span> <span class="token generic-function"><span class="token function">createAction</span><span class="token generic class-name"><span class="token operator">&lt;</span>IDeleteToDoPayload<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'DELETE/TO_DO'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> initialState<span class="token operator">:</span> IToDoListState <span class="token operator">=</span> <span class="token punctuation">{</span>
  toDoList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> reducer <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">toggleToDo</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> IToDoListState<span class="token punctuation">,</span> action<span class="token operator">:</span> IToggleToDoAction<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>toDoList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> ToDo<span class="token punctuation">)</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>id <span class="token operator">===</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span>checked <span class="token operator">=</span>
      action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>checked
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">deleteToDo</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> IToDoListState<span class="token punctuation">,</span> action<span class="token operator">:</span> IDeleteToDoAction<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>toDoList <span class="token operator">=</span> state<span class="token punctuation">.</span>toDoList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>todo<span class="token operator">:</span> ToDo<span class="token punctuation">)</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>id <span class="token operator">!==</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> toDoListReducer <span class="token operator">=</span> <span class="token function">createReducer</span><span class="token punctuation">(</span>initialState<span class="token punctuation">,</span> builder <span class="token operator">=></span> <span class="token punctuation">{</span>
  builder
    <span class="token punctuation">.</span><span class="token function">addCase</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>toggleToDo<span class="token punctuation">,</span> reducer<span class="token punctuation">.</span>toggleToDo<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addCase</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>deleteToDo<span class="token punctuation">,</span> reducer<span class="token punctuation">.</span>deleteToDo<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> toDoListReducer</code></pre></div>
<p>이처럼 리듀서 툴킷에서 제공하는 createAction, createReducer만 있으면 리덕스를 사용할 수 있다.
빌더 패턴을 사용하여 리듀서 함수들을 추가하기 때문에 createReducer 함수를 사용하는 코드가 매우 간결하다.</p>
<p>또한 리듀서는 내부적으로 immer 라이브러리를 사용하기 때문에 불변성에 대해서 신경쓰지 않고 state를 변경시켜주어도 내부적으로 불변성을 지켜준다.</p>
<p>만든 리듀서는 스토어에 다음과 같이 추가해준다.</p>
<ul>
<li><strong>src/store/index.ts</strong></li>
</ul>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> configureStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@reduxjs/toolkit'</span>

<span class="token keyword">import</span> toDoListReducer <span class="token keyword">from</span> <span class="token string">'src/store/toDoList'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  reducer<span class="token operator">:</span> <span class="token punctuation">{</span>
    toDoList<span class="token operator">:</span> toDoListReducer<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Infer the `RootState` and `AppDispatch` types from the store itself</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">RootState</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> store<span class="token punctuation">.</span>getState<span class="token operator">></span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">AppDispatch</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> store<span class="token punctuation">.</span>dispatch</code></pre></div>
<p>이제 보일러 플레이트가 얼마나 단순해졌는 확인해기 위해 List와 Item이라는 컴포넌트를 만들어서 확인해보자.</p>
<ul>
<li><strong>src/components/toDoList/List.tsx</strong></li>
</ul>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token keyword">import</span> Item <span class="token keyword">from</span> <span class="token string">'src/components/toDoList/item'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RootState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/store'</span>

<span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> toDoList<span class="token operator">:</span> ToDoList <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>state<span class="token operator">:</span> RootState<span class="token punctuation">)</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>toDoList<span class="token punctuation">.</span>toDoList<span class="token punctuation">,</span>
  <span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token punctuation">{</span>toDoList <span class="token operator">&amp;&amp;</span> toDoList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>toDo <span class="token operator">=></span> <span class="token operator">&lt;</span>Item key<span class="token operator">=</span><span class="token punctuation">{</span>toDo<span class="token punctuation">.</span>id<span class="token punctuation">}</span> toDo<span class="token operator">=</span><span class="token punctuation">{</span>toDo<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> List</code></pre></div>
<p>store에 있는 state를 가져오기 위해서는 react-redux가 제공하는 useSelect를 사용한다. 이때 타입스크립트를 사용한다면 store에서 만든 RootState 타입을 사용하여야 한다.</p>
<ul>
<li>** src/components/toDoList/Item.tsx**</li>
</ul>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> useDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-redux"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> action <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"src/store/toDoList"</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  toDo<span class="token operator">:</span> ToDo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Item</span><span class="token punctuation">(</span><span class="token punctuation">{</span> toDo <span class="token punctuation">}</span><span class="token operator">:</span> IProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> content<span class="token punctuation">,</span> checked <span class="token punctuation">}</span> <span class="token operator">=</span> toDo<span class="token punctuation">;</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onToggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token function">toggleToDo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">,</span> checked<span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked <span class="token keyword">as</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onDeleteToDo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token function">deleteToDo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> defaultChecked<span class="token operator">=</span><span class="token punctuation">{</span>checked<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>onToggle<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onDeleteToDo<span class="token punctuation">}</span><span class="token operator">></span>삭제<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Item<span class="token punctuation">;</span></code></pre></div>
<p>액션을 디스패치(dispatch)하기 위해서는 react-redux에서 제공하는 useDispatch를 사용한다.</p>
<p>컴포넌트 단에서도 useSelect와 useDispatch를 이용하면 보일러 플레이트가 많이 간결하다는 것을 확인할 수 있다.</p></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">Thank You for Visiting My Blog, Have a Good Day 😆<br/>© 2021 Developer YongHyun, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/8_Redux-toolkit/";window.___webpackCompilationHash="d71c2f44b223fb5f19df";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-635a9dfd597478a1f0fa.js"],"app":["/app-926ca64946cd67eef8a8.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-a019055bce988c76eb2c.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-f2bcfec433871461deda.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-42f3bc44c57e8846f30b.js"]};/*]]>*/</script><script src="/polyfill-635a9dfd597478a1f0fa.js" nomodule=""></script><script src="/component---src-templates-post-template-tsx-42f3bc44c57e8846f30b.js" async=""></script><script src="/d0dcf9c1039535d44ee74defc829dfbf62dac3c5-100700d0ee8b52b923af.js" async=""></script><script src="/cb1608f2-3d1f96b69f7c4498694b.js" async=""></script><script src="/app-926ca64946cd67eef8a8.js" async=""></script><script src="/framework-a41a30b6052f08f79325.js" async=""></script><script src="/webpack-runtime-66440a84066d2852c863.js" async=""></script></body></html>